{{- /* AdSense: avoid ads on navigation/list pages (policy: Navigation) */ -}}
{{- /* Make AdSense opt-in (set params.adsenseClient explicitly) */ -}}
{{- $adsenseClient := site.Params.adsenseClient | default "" -}}
{{- $adsenseEnabled := and (ne $adsenseClient "") (or hugo.IsProduction (eq site.Params.env "production")) -}}
{{- $adsenseEligible := and $adsenseEnabled .IsPage (eq .Type "posts") (ne .Params.robotsNoIndex true) -}}
{{- if $adsenseEligible -}}
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client={{ $adsenseClient }}"
     crossorigin="anonymous"></script>
{{- end -}}
